<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <title>Merry Christmas</title>
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="./header/style.css">

</head>
<body>

<audio loop id="bgAudio" autoplay>
    <source src="./musics/jingle-bells.mp3">
</audio>

<audio loop id="myAudio" preload="auto">
    <source src="./musics/small-jumping-frog.mp3">
</audio>

<!--header-->
<div class="light">
    <ul class="line">
        <li class="red"></li>
        <li class="yellow"></li>
        <li class="blue"></li>
        <li class="pink"></li>
        <li class="red"></li>
        <li class="green"></li>
        <li class="blue"></li>
        <li class="yellow"></li>
        <li class="red"></li>
        <li class="pink"></li>
        <li class="blue"></li>
        <li class="yellow"></li>
        <li class="red"></li>
        <li class="green"></li>
        <li class="blue"></li>
        <li class="yellow"></li>
        <li class="red"></li>
        <li class="pink"></li>
        <li class="green"></li>
        <li class="blue"></li>
        <li class="pink"></li>
        <li class="red"></li>
        <li class="green"></li>
        <li class="blue"></li>
    </ul>
</div>

<h1>Merry Christmas ! </h1>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous">
</script>
<!-- partial -->
<script src="./header/script.js"></script>

<!--tree-->

<div id="tree">
    <div class="star"></div>
</div>
<div class="title">帅气迷人的唯心主义者</div>
<div class="title">圣 诞 快 乐</div>

<div class="poem">
    <p>May you be filled with happiness!</p>
    <p>Eat. Drink. Be Merry. </p>
    <p>Have a wonderful Christmas!</p>
</div>
<div class="footer christmas">
    <p onclick="togglePlayAudio()"> 音乐狂6666 @ 2021 </p>
</div>
<div class="container-froggy">
    <div id="jump-fast" class="hide">
        <img alt="frog" src="./images/frog1.png"/>
    </div>
</div>

<script>
    const bgAudio = document.getElementById('bgAudio')
    const bgDiv = document.querySelectorAll("body > div:not(.footer)")

    window.load = () =>{
        bgAudio.play()
    }

    // console.log(bgDiv)
    const n = bgDiv.length

    function addEvent() {
        for (let i = 0; i < n - 1; i++) {
            bgDiv[i].addEventListener('click', () => {
                if (!myAudio.paused) {
                    myAudio.pause()
                    toggleJumping()
                }
                return bgAudio.paused ? bgAudio.play() : bgAudio.pause()
            })
        }
    }

    addEvent()

    function toggleJumping() {
        const toggleDivFast = document.getElementById("jump-fast")
        toggleDivFast.classList.toggle("hide")
    }

    const myAudio = document.getElementById("myAudio");

    function togglePlayAudio() {
        toggleJumping()
        if (!bgAudio.paused) {
            bgAudio.pause()
        }
        return myAudio.paused ? myAudio.play() : myAudio.pause()
    }
</script>
<script src="./main.js"></script>

</body>
</html>
